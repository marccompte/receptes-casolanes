parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"MCF2":[function(require,module,exports) {
var define;
var global = arguments[3];
var i,t=arguments[3];!function(t){function n(i,t,n,e,s){this._listener=t,this._isOnce=n,this.context=e,this._signal=i,this._priority=s||0}function e(i,t){if("function"!=typeof i)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",t))}function s(){this._bindings=[],this._prevParams=null;var i=this;this.dispatch=function(){s.prototype.dispatch.apply(i,arguments)}}n.prototype={active:!0,params:null,execute:function(i){var t,n;return this.active&&this._listener&&(n=this.params?this.params.concat(i):i,t=this._listener.apply(this.context,n),this._isOnce&&this.detach()),t},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},s.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(i,t,e,s){var r,o=this._indexOfListener(i,e);if(-1!==o){if((r=this._bindings[o]).isOnce()!==t)throw new Error("You cannot add"+(t?"":"Once")+"() then add"+(t?"Once":"")+"() the same listener without removing the relationship first.")}else r=new n(this,i,t,e,s),this._addBinding(r);return this.memorize&&this._prevParams&&r.execute(this._prevParams),r},_addBinding:function(i){var t=this._bindings.length;do{--t}while(this._bindings[t]&&i._priority<=this._bindings[t]._priority);this._bindings.splice(t+1,0,i)},_indexOfListener:function(i,t){for(var n,e=this._bindings.length;e--;)if((n=this._bindings[e])._listener===i&&n.context===t)return e;return-1},has:function(i,t){return-1!==this._indexOfListener(i,t)},add:function(i,t,n){return e(i,"add"),this._registerListener(i,!1,t,n)},addOnce:function(i,t,n){return e(i,"addOnce"),this._registerListener(i,!0,t,n)},remove:function(i,t){e(i,"remove");var n=this._indexOfListener(i,t);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),i},removeAll:function(){for(var i=this._bindings.length;i--;)this._bindings[i]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(i){if(this.active){var t,n=Array.prototype.slice.call(arguments),e=this._bindings.length;if(this.memorize&&(this._prevParams=n),e){t=this._bindings.slice(),this._shouldPropagate=!0;do{e--}while(t[e]&&this._shouldPropagate&&!1!==t[e].execute(n))}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var r=s;r.Signal=s,"function"==typeof i&&i.amd?i(function(){return r}):"undefined"!=typeof module&&module.exports?module.exports=r:t.signals=r}(this);
},{}],"uM0g":[function(require,module,exports) {
var define;
var e;!function(){var t=function(e){var t,r,n;function s(e,t){if(e.indexOf)return e.indexOf(t);for(var r=e.length;r--;)if(e[r]===t)return r;return-1}function i(e,t){var r=s(e,t);-1!==r&&e.splice(r,1)}function a(e,t){return"[object "+t+"]"===Object.prototype.toString.call(e)}function o(e){return a(e,"RegExp")}function u(e){return a(e,"Array")}function h(e){return"function"==typeof e}function c(e){return null===e||"null"===e?null:"true"===e||"false"!==e&&(e===n||"undefined"===e?n:""===e||isNaN(e)?e:parseFloat(e))}function p(e,t){for(var r,n,s,i,a=(e||"").replace("?","").split("&"),o=-1,h={};n=a[++o];)r=n.indexOf("="),i=n.substring(0,r),s=decodeURIComponent(n.substring(r+1)),!1!==t&&(s=c(s)),i in h?u(h[i])?h[i].push(s):h[i]=[h[i],s]:h[i]=s;return h}function l(){this.bypassed=new e.Signal,this.routed=new e.Signal,this._routes=[],this._prevRoutes=[],this._piped=[],this.resetState()}function d(t,r,n,s){var i=o(t),a=s.patternLexer;this._router=s,this._pattern=t,this._paramsIds=i?null:a.getParamIds(t),this._optionalParamsIds=i?null:a.getOptionalParamsIds(t),this._matchRegexp=i?t:a.compilePattern(t,s.ignoreCase),this.matched=new e.Signal,this.switched=new e.Signal,r&&this.matched.add(r),this._priority=n||0}return r=""===/t(.+)?/.exec("t")[1],l.prototype={greedy:!1,greedyEnabled:!0,ignoreCase:!0,ignoreState:!1,shouldTypecast:!1,normalizeFn:null,resetState:function(){this._prevRoutes.length=0,this._prevMatchedRequest=null,this._prevBypassedRequest=null},create:function(){return new l},addRoute:function(e,t,r){var n=new d(e,t,r,this);return this._sortedInsert(n),n},removeRoute:function(e){i(this._routes,e),e._destroy()},removeAllRoutes:function(){for(var e=this.getNumRoutes();e--;)this._routes[e]._destroy();this._routes.length=0},parse:function(e,t){if(e=e||"",t=t||[],this.ignoreState||e!==this._prevMatchedRequest&&e!==this._prevBypassedRequest){var r,n=this._getMatchedRoutes(e),s=0,i=n.length;if(i)for(this._prevMatchedRequest=e,this._notifyPrevRoutes(n,e),this._prevRoutes=n;s<i;)(r=n[s]).route.matched.dispatch.apply(r.route.matched,t.concat(r.params)),r.isFirst=!s,this.routed.dispatch.apply(this.routed,t.concat([e,r])),s+=1;else this._prevBypassedRequest=e,this.bypassed.dispatch.apply(this.bypassed,t.concat([e]));this._pipeParse(e,t)}},_notifyPrevRoutes:function(e,t){for(var r,n=0;r=this._prevRoutes[n++];)r.route.switched&&this._didSwitch(r.route,e)&&r.route.switched.dispatch(t)},_didSwitch:function(e,t){for(var r,n=0;r=t[n++];)if(r.route===e)return!1;return!0},_pipeParse:function(e,t){for(var r,n=0;r=this._piped[n++];)r.parse(e,t)},getNumRoutes:function(){return this._routes.length},_sortedInsert:function(e){var t=this._routes,r=t.length;do{--r}while(t[r]&&e._priority<=t[r]._priority);t.splice(r+1,0,e)},_getMatchedRoutes:function(e){for(var t,r=[],n=this._routes,s=n.length;(t=n[--s])&&((!r.length||this.greedy||t.greedy)&&t.match(e)&&r.push({route:t,params:t._getParamsArray(e)}),this.greedyEnabled||!r.length););return r},pipe:function(e){this._piped.push(e)},unpipe:function(e){i(this._piped,e)},toString:function(){return"[crossroads numRoutes:"+this.getNumRoutes()+"]"}},(t=new l).VERSION="0.12.2",t.NORM_AS_ARRAY=function(e,t){return[t.vals_]},t.NORM_AS_OBJECT=function(e,t){return[t]},d.prototype={greedy:!1,rules:void 0,match:function(e){return e=e||"",this._matchRegexp.test(e)&&this._validateParams(e)},_validateParams:function(e){var t,r=this.rules,n=this._getParamsObject(e);for(t in r)if("normalize_"!==t&&r.hasOwnProperty(t)&&!this._isValidParam(e,t,n))return!1;return!0},_isValidParam:function(e,t,r){var n=this.rules[t],i=r[t],a=!1,c=0===t.indexOf("?");return null==i&&this._optionalParamsIds&&-1!==s(this._optionalParamsIds,t)?a=!0:o(n)?(c&&(i=r[t+"_"]),a=n.test(i)):u(n)?(c&&(i=r[t+"_"]),a=this._isValidArrayRule(n,i)):h(n)&&(a=n(i,e,r)),a},_isValidArrayRule:function(e,t){if(!this._router.ignoreCase)return-1!==s(e,t);"string"==typeof t&&(t=t.toLowerCase());for(var r,n=e.length;n--;)if(("string"==typeof(r=e[n])?r.toLowerCase():r)===t)return!0;return!1},_getParamsObject:function(e){for(var t,n,i=this._router.shouldTypecast,a=this._router.patternLexer.getParamValues(e,this._matchRegexp,i),o={},u=a.length;u--;)n=a[u],this._paramsIds&&(0===(t=this._paramsIds[u]).indexOf("?")&&n&&(o[t+"_"]=n,n=p(n,i),a[u]=n),r&&""===n&&-1!==s(this._optionalParamsIds,t)&&(n=void 0,a[u]=n),o[t]=n),o[u]=n;return o.request_=i?c(e):e,o.vals_=a,o},_getParamsArray:function(e){var t=this.rules?this.rules.normalize_:null;return(t=t||this._router.normalizeFn)&&h(t)?t(e,this._getParamsObject(e)):this._getParamsObject(e).vals_},interpolate:function(e){var t=this._router.patternLexer.interpolate(this._pattern,e);if(!this._validateParams(t))throw new Error("Generated string doesn't validate against `Route.rules`.");return t},dispose:function(){this._router.removeRoute(this)},_destroy:function(){this.matched.dispose(),this.switched.dispose(),this.matched=this.switched=this._pattern=this._matchRegexp=null},toString:function(){return'[Route pattern:"'+this._pattern+'", numListeners:'+this.matched.getNumListeners()+"]"}},l.prototype.patternLexer=function(){var e=/[\\.+*?\^$\[\](){}\/'#]/g,t=/^\/|\/$/g,r=/\/$/g,n=/(?:\{|:)([^}:]+)(?:\}|:)/g,s={OS:{rgx:/([:}]|\w(?=\/))\/?(:|(?:\{\?))/g,save:"$1{{id}}$2",res:"\\/?"},RS:{rgx:/([:}])\/?(\{)/g,save:"$1{{id}}$2",res:"\\/"},RQ:{rgx:/\{\?([^}]+)\}/g,res:"\\?([^#]+)"},OQ:{rgx:/:\?([^:]+):/g,res:"(?:\\?([^#]*))?"},OR:{rgx:/:([^:]+)\*:/g,res:"(.*)?"},RR:{rgx:/\{([^}]+)\*\}/g,res:"(.+)"},RP:{rgx:/\{([^}]+)\}/g,res:"([^\\/?]+)"},OP:{rgx:/:([^:]+):/g,res:"([^\\/?]+)?/?"}},i=1,a=2,o=3,h=i;function p(e,t){var r,n=[];for(e.lastIndex=0;r=e.exec(t);)n.push(r[1]);return n}function l(e,t,r){var n,i;for(i in s)s.hasOwnProperty(i)&&(n=s[i],e=e.replace(n[t],n[r]));return e}return function(){var e,t;for(e in s)s.hasOwnProperty(e)&&((t=s[e]).id="__CR_"+e+"__",t.save="save"in t?t.save.replace("{{id}}",t.id):t.id,t.rRestore=new RegExp(t.id,"g"))}(),{strict:function(){h=a},loose:function(){h=i},legacy:function(){h=o},getParamIds:function(e){return p(n,e)},getOptionalParamsIds:function(e){return p(s.OP.rgx,e)},getParamValues:function(e,t,r){var n=t.exec(e);return n&&(n.shift(),r&&(n=function(e){for(var t=e.length,r=[];t--;)r[t]=c(e[t]);return r}(n))),n},compilePattern:function(n,s){return(n=n||"")&&(h===i?n=n.replace(t,""):h===o&&(n=n.replace(r,"")),n=l(n,"rgx","save"),n=l(n=n.replace(e,"\\$&"),"rRestore","res"),h===i&&(n="\\/?"+n)),h!==a&&(n+="\\/?"),new RegExp("^"+n+"$",s?"i":"")},interpolate:function(e,t){if(t=t||{},"string"!=typeof e)throw new Error("Route pattern should be a string.");return s.OS.trail||(s.OS.trail=new RegExp("(?:"+s.OS.id+")+$")),e.replace(s.OS.rgx,s.OS.save).replace(n,function(e,r){var n;if(r="?"===r.substr(0,1)?r.substr(1):r,null!=t[r]){if("object"==typeof t[r]){var s,i=[];for(var a in t[r])if(u(s=t[r][a]))for(var o in s)"[]"==a.slice(-2)?i.push(encodeURI(a.slice(0,-2))+"[]="+encodeURI(s[o])):i.push(encodeURI(a+"="+s[o]));else i.push(encodeURI(a+"="+s));n="?"+i.join("&")}else n=String(t[r]);if(-1===e.indexOf("*")&&-1!==n.indexOf("/"))throw new Error('Invalid value "'+n+'" for segment "'+e+'".')}else{if(-1!==e.indexOf("{"))throw new Error("The segment "+e+" is required.");n=""}return n}).replace(s.OS.trail,"").replace(s.OS.rRestore,"/")}}}(),t};"function"==typeof e&&e.amd?e(["signals"],t):"undefined"!=typeof module&&module.exports?module.exports=t(require("signals")):window.crossroads=t(window.signals)}();
},{"signals":"MCF2"}],"d6sW":[function(require,module,exports) {
var e=require("crossroads"),i=null,t={};function n(e,i){return e.Titol[0]<i.Titol[0]?-1:e.Titol[0]>i.Titol[0]?1:0}$(document).ready(function(){o.init(),"undefined"==typeof Worker?alert("Navegador no suportat."):(i=new Worker("/db.50ec2a83.js"),e.addRoute("/recepta/{id}",function(e){o.start(),o.show(e)}),e.addRoute("/ingredient/{id}",function(e){o.start(),o.ingredient(e)}),e.addRoute("/",function(){o.start(),o.home()}),e.parse(document.location.pathname),i.onmessage=function(e){var i=e.data.data;switch(e.data.type){case"add_menu":var t=$("<li>",{html:'<a class="dropdown-trigger" href="javascript:void(null)" data-target="dropdown'+i.idx+'">'+i.title+"</a>"}).addClass("loading").appendTo($("#nav"));setTimeout(function(){t.removeClass("loading")},100);$("<ul>",{id:"dropdown"+i.idx}).addClass("dropdown-content dropdown-nested").appendTo($("body"));var n=$("<li>");$("<div>",{html:'<i class="material-icons">import_contacts</i>'+i.title}).addClass("collapsible-header").appendTo(n),$("<div>",{html:'<ul class="collection" id="mobile-dropdown'+i.idx+'"></ul>'}).addClass("collapsible-body").appendTo(n);n.appendTo($(".sidenav .collapsible")),o.menu[i.title]={recipes:[]};break;case"add_submenu":$("<ul>",{id:"dropdown"+i.title}).addClass("dropdown-content").appendTo($("body")),t=$("<li>",{html:'<a class="dropdown-trigger sub" href="javascript:void(null)" data-target="dropdown'+i.title+'">'+i.title+"</a>"}).appendTo($("#dropdown"+i.menu_idx));var a="#mobile-dropdown"+i.menu_idx;n=$("<li>").addClass("collection-item waves-effect").attr("id","mobile-menu-"+i.title).appendTo($(a));(r=$("<a>",{href:"javascript:void(null)"})).html('<i class="material-icons">import_contacts</i>'+i.title).appendTo(n),$("<ul>").addClass("collection").attr("id","mobile-dropdown"+i.title).appendTo(n);break;case"add_recipe":if(void 0===i.recipe.Titol)return;o.menu[i.menu.title].recipes.push(i.recipe),o.receptes[i.recipe.id]=i.recipe;var r=$("<a>",{href:"javascript:void(null)"}).attr("data-id",i.recipe.id).addClass("open-recipe").html(i.recipe.Titol[0]);a="#dropdown"+i.menu.idx;void 0!==i.recipe.Categories.subcategoria&&(a="#dropdown"+i.recipe.Categories.subcategoria);t=$("<li>").append(r).appendTo($(a)),a="#mobile-dropdown"+i.menu.idx;void 0!==i.recipe.Categories.subcategoria&&(a="#mobile-dropdown"+i.recipe.Categories.subcategoria);n=$("<li>").addClass("collection-item waves-effect").attr("id","mobile-menu-"+i.recipe.id).appendTo($(a));r.clone().html('<i class="material-icons">local_dining</i>'+i.recipe.Titol[0]).appendTo(n);break;case"finish":o.finish(),$(".dropdown-trigger").dropdown({constrain_width:!1,closeOnClick:!1,coverTrigger:!1,hover:!0}),$(".sub").dropdown({constrain_width:!1,hover:!0});break;case"finished_recipe":o.receptes[i.id]=i,o.show(i.id)}}),$(".brand-logo").on("click",function(i){$("#recipe-list").empty(),history.pushState(null,null,"/"),e.parse(document.location.pathname)})});var o={menu:{},receptes:[],content:null,page:"home",_ingredient:!1,init:function(){this.content=$("#content"),$(".sidenav").sidenav(),$(".collapsible").collapsible()},start:function(){$(".sidenav .collection-item").removeClass("active"),$("body").removeClass("no-content"),$("input.autocomplete").val(""),window.scrollTo(0,0)},home:function(){$("body").removeClass("ingredient").removeClass("recipe").addClass("home"),this.page="home",this._ingredient=!1;var e=$("#home.template").html();this.content.html(e),this.is_loaded()?($("#recipe-list").empty(),this.finish()):i.postMessage({type:"init"})},is_loaded:function(){return Object.keys(o.menu).length},ingredient:function(e){this._ingredient=e,$("body").removeClass("home").removeClass("recipe").addClass("ingredient"),$("body").addClass("no-content"),this.is_loaded()?($("#recipe-list").empty(),this.finish()):i.postMessage({type:"init"})},print_ingredient:function(e,i){var t="";return"persones"===e||"persona"===e?""!==i&&(t+="<i>(per "+i+" persones)</i>"):t+="<li>"+i+"</li>",t},show:function(e){this.page=parseInt(e),this._ingredient=!1,$("body").removeClass("home").removeClass("ingredient").addClass("recipe");var t=$(".template#recipe");if(e in o.receptes){var n=o.receptes[e].Categories.categoria;"undefined"===n&&(n=o.receptes[e].Categories.Categoria),t.find(".recipe-title").html(o.receptes[e].Titol[0]),t.find(".recipe-category").html(n);var a="";Object.keys(o.receptes[e].Ingredients).forEach(function(i){var t=o.receptes[e].Ingredients[i];t instanceof Object?(a+="<h6>"+i+"</h6>",Object.keys(t).forEach(function(e){a+=this.print_ingredient(e,t[e])}.bind(this))):a+=this.print_ingredient(i,t)}.bind(this)),t.find(".recipe-ingredients ul").html(a);var r=o.receptes[e].Elaboracio.map(function(e){return":"===e[e.length-1]?"<h6>"+e+"</h6>":"<li>"+e+"</li>"});t.find(".recipe-description ol").html(r.join(""));var s=t.html();this.content.html(s),this.is_loaded()?($("#recipe-list").empty(),this.finish()):i.postMessage({type:"init"})}else i.postMessage({type:"get_recipe",data:{id:e}})},finish:function(){if($("body").hasClass("home")){var i=$("#recipe-list"),t="Totes les receptes";t=$("<h4>",{html:t}),i.append(t),i.append('<div style="clear:both;"></div>'),Object.keys(this.menu).forEach(function(e){this.menu[e].recipes.forEach(function(e){o.other(e)})}.bind(this))}else if($("body").hasClass("recipe")){var a=this.receptes[this.page].Categories.categoria;void 0===a&&(a=this.receptes[this.page].Categories.Categoria);i=$("#recipe-list"),t="Altres "+a.toLowerCase();t=$("<h4>",{html:t}),i.append(t),i.append('<div style="clear:both;"></div>');this.menu[a].recipes.sort(n),this.menu[a].recipes.forEach(function(e){e.id!==this.page&&o.other(e)}.bind(this)),$("#mobile-menu-"+this.page).addClass("active")}else if($("body").hasClass("ingredient")){i=$("#recipe-list"),t="Receptes amb "+decodeURI(this._ingredient.toLowerCase());t=$("<h4>",{html:t}),i.append(t),i.append('<div style="clear:both;"></div>'),Object.keys(this.menu).forEach(function(e){this.menu[e].recipes.forEach(function(e){decodeURI(this._ingredient)in e.Ingredients&&this.other(e)}.bind(this))}.bind(this))}var r={};Object.keys(this.receptes).forEach(function(e){var i=this.receptes[e];Object.keys(i.Ingredients).forEach(function(e){"persones"!==e.toLowerCase()&&"string"==typeof i.Ingredients[e]&&(r[e[0].toUpperCase()+e.substring(1)]="/img/ingredient.png")})}.bind(this)),$("input.autocomplete").autocomplete({data:r,sortFunction:function(e,i,t){return e.indexOf(t)!==i.indexOf(t)?e.indexOf(t)-i.indexOf(t):e<i?-1:e>i?1:0},onAutocomplete:function(i){$(".preloader-wrapper").addClass("active"),history.pushState(null,null,"/ingredient/"+i.toLowerCase()),$("#recipe-list").empty(),e.parse(document.location.pathname)}}),$("input.autocomplete").on("click",function(e){$(e.currentTarget).val("")}),$(".open-recipe").on("click",function(i){var t=$(i.currentTarget).data("id");history.pushState(null,null,"/recepta/"+t),e.parse(document.location.pathname),i.preventDefault(),i.stopPropagation()}),$(".sidenav").sidenav(),$(".collapsible").collapsible({accordion:!1}),$(".preloader-wrapper").removeClass("active")},other:function(e){var i=$(".template#recipe-thumb");if(i.find(".card-title").html(e.Titol[0]),i.find(".recipe-category").html(e.Categories.categoria),i.find("a").attr("href","javascript:void(null)").attr("data-id",e.id).addClass("open-recipe"),void 0!==e.Ingredients){e.Ingredients.persones;delete e.Ingredients.persones;var t=Object.keys(e.Ingredients).join(", ");t=t[0].toUpperCase()+t.substring(1)+".",i.find(".ingredients").html(t)}var n=i.html();$("#recipe-list").append(n)}};String.prototype.width=function(e){var i=e||"21px arial",t=$("<div></div>").text(this).css({position:"absolute",float:"left","white-space":"nowrap",visibility:"hidden",font:i}).appendTo($("body")),n=t.width();return t.remove(),n};
},{"crossroads":"uM0g","./db.js":[["db.50ec2a83.js","f9V3"],"db.50ec2a83.js.map","f9V3"]}]},{},["d6sW"], null)
//# sourceMappingURL=/main.fb6bbcaf.js.map